  <!-- We have a "card" centric implementation that clones the cards from below.
       Widgets/repeated items are defined in the other template hierarchies for
       the cards to use as appropriate.

       Currently, the usually-present header strip must be defined on each card;
       cards do not magically get wrapped in nodes or have any nodes injected
       into them. -->
  <div id="templates" class="collapsed">
    <div id="templ-card">
      <!-- Shows folders for navigation or move targeting.
           The navigation mode is less than full-width so we can see the
           messages display to its right.  -->
      <div class="card-folder-picker card">
        <section class="fld-folders-header skin-organic" role="region">
          <header>
            <a href="#" class="fld-accounts-btn">
              <span class="icon icon-back"></span>
            </a>
            <h1 class="fld-folders-header-account-label"></h1>
          </header>
        </section>
        <div class="scrollregion-below-header folder-scroller-region">
          <div class="fld-folders-container">
          </div>
        </div>
        <div class="fld-nav-toolbar bottom-toolbar">
          <button class="fld-nav-settings-btn bottom-btn"></button>
          <div class="fld-nav-last-synced">
            <h3>
              <span class="fld-nav-last-synced-label"
                    data-l10n-id="account-last-synced-label"></span>
              <span class="fld-nav-last-synced-value"></span>
            </h3>
          </div>
          <span class="fld-nav-account-problem icon collapsed">!</span>
        </div>
      </div>
      <!-- Shows accounts, to the left of folder list.
           The navigation mode is less than full-width so we can see the
           messages display to its right.  -->
      <div class="card-account-picker card anim-overlay">
        <section class="acct-picker-header skin-organic" role="region">
          <header>
            <a href="#" class="fld-accounts-btn">
              <span class="icon icon-back"></span>
            </a>
            <h1 class="acct-picker-header-label"
                data-l10n-id="settings-account-section"></h1>
          </header>
        </section>
        <div class="scrollregion-below-header acct-scroller-region">
          <div class="acct-list-container">
          </div>
          <div class="bottom-toolbar-spacer"></div>
        </div>
        <div class="fld-nav-toolbar bottom-toolbar">
          <button class="fld-nav-settings-btn bottom-btn"></button>
        </div>
      </div>
      <!-- Lists the messages in a folder -->
      <div class="card-message-list card" data-tray-target>
        <!-- Non-search header -->
        <section class="msg-list-header msg-nonsearch-only" role="region">
          <header>
            <a href="#" class="msg-folder-list-btn">
              <span class="icon icon-menu">menu</span>
            </a>
            <menu type="toolbar">
              <a href="#" class="msg-compose-btn">
                <span class="icon icon-compose">compose</span>
              </a>
            </menu>
            <h1 class="msg-list-header-folder-label header-label"></h1>
          </header>
        </section>
        <!-- Multi-edit state header -->
        <section class="msg-listedit-header skin-dark collapsed" role="region">
          <header>
            <a href="#" class="msg-listedit-cancel-btn">
              <span class="icon icon-close"></span>
            </a>
            <h1 class="msg-listedit-header-label"></h1>
          </header>
        </section>
        <!-- Search header -->
        <section role="region"
                 class="msg-search-header msg-search-only">
          <header>
            <a href="#" class="msg-search-cancel">
              <span class="icon icon-close"
                    data-l10n-id="message-search-cancel-accessible"></span>
            </a>
            <form>
              <input type="text" required="required" class="msg-search-text"
                     data-l10n-id="message-search-input" />
              <button type="reset" data-l10n-id="form-clear-input"></button>
            </form>
          </header>
          <!-- Search filter switcher -->
          <header class="msg-search-controls-bar">
            <ul role="tablist" class="filter" data-type="filter" data-items="5">
              <li role="tab" class="msg-search-from msg-search-filter"
                  data-filter="author">
                <a data-l10n-id="message-search-from">FroM</a></li>
              <li role="tab" class="msg-search-to msg-search-filter"
                  data-filter="recipients">
                <a data-l10n-id="message-search-to">tO</a></li>
              <li role="tab" class="msg-search-subject msg-search-filter"
                   data-filter="subject">
                <a data-l10n-id="message-search-subject">SubjecT</a>
              </li>
              <li role="tab" class="msg-search-body msg-search-filter"
                   data-filter="body">
                <a data-l10n-id="message-search-body">BodY</a></li>
              <li role="tab" class="msg-search-body msg-search-filter"
                  data-filter="all" aria-selected>
                <a data-l10n-id="message-search-all">AlL</a></li>
            </ul>
          </header>
        </section>
        <progress class="msg-list-progress hidden" value="0" total="1.0">
        </progress>
        <!-- Scroll region -->
        <div class="msg-list-scrollouter">
          <!-- exists so we can force a minimum height -->
          <div class="msg-list-scrollinner">
            <!-- The search textbox hides under the lip of the messages.
                 As soon as any typing happens in it, we push the search
                 controls card. -->
            <div class="msg-search-tease-bar msg-nonsearch-only">
              <input class="msg-search-text-tease" type="text"
                     data-l10n-id="message-search-input" />
            </div>
            <div class="msg-messages-container">
            </div>
            <!-- maintain vertical space for the syncing/sync more div's
                 regardless of their displayed status so we don't scroll them
                 out of the way -->
            <div class="msg-messages-sync-container">
              <p class="msg-messages-syncing collapsed">
                <progress class="small"></progress>
                <span data-l10n-id="messages-syncing">Message loadinG</span>
              </p>
              <p class="msg-messages-sync-more collapsed">
                <span data-l10n-id="messages-sync-more">SynC MorE</span>
              </p>
            </div>
            <div class="bottom-toolbar-spacer"></div>
          </div>
        </div>
        <!-- Conveys background send, plus undo-able recent actions -->
        <div class="msg-activity-infobar hidden">
        </div>
        <!-- Toolbar for non-multi-edit state -->
        <div class="msg-list-action-toolbar bottom-toolbar">
          <button class="msg-refresh-btn bottom-btn msg-nonsearch-only"></button>
          <button class="msg-search-btn bottom-btn msg-nonsearch-only"></button>
          <button class="msg-edit-btn bottom-btn"></button>
        </div>
        <!-- Toolbar for multi-edit state -->
        <div class="msg-listedit-action-toolbar bottom-edit-toolbar bottom-toolbar collapsed">
          <button class="msg-delete-btn bottom-btn"></button>
          <button class="msg-star-btn bottom-btn"></button>
          <button class="msg-mark-read-btn bottom-btn"></button>
          <button class="msg-move-btn bottom-btn"></button>
        </div>
        <div class="msg-list-empty-container collapsed">
          <p class="msg-list-empty-message-text" data-l10n-id="messages-folder-empty">No messagE</p>
        </div>
      </div>

      <!-- Message Reader -->
      <div class="card-message-reader card">
        <section class="msg-reader-header" role="region">
          <header>
            <a href="#" class="msg-back-btn">
              <span class="icon icon-back"></span>
            </a>
            <menu type="toolbar">
              <a href="#" class="msg-reply-all-btn">
                <span class="icon icon-reply-all"></span>
              </a>
              <a href="#" class="msg-reply-btn">
                <span class="icon icon-reply"></span>
              </a>
            </menu>
            <h1 class="msg-reader-header-label"
              data-l10n-id="reader-header">ReaD</h1>
          </header>
        </section>
        <div class="scrollregion-below-header scrollregion-horizontal-too">
          <div class="msg-envelope-bar">
            <div class="msg-envelope-from-line">
              <span class="msg-envelope-key"
                     data-l10n-id="envelope-from">FroM</span>
            </div>
            <!-- the details starts out collapsed, but can be toggled -->
            <div class="msg-envelope-details">
              <div class="msg-envelope-to-line">
                <span class="msg-envelope-key"
                       data-l10n-id="envelope-to">tO</span>
              </div>
              <div class="msg-envelope-cc-line">
                <span class="msg-envelope-key"
                       data-l10n-id="envelope-cc">cC</span>
              </div>
              <div class="msg-envelope-bcc-line">
                <span class="msg-envelope-key"
                       data-l10n-id="envelope-bcc">BcC</span>
              </div>
            </div>
            <div class="msg-envelope-subject-container">
              <h3 class="msg-envelope-subject"></h3>
              <span class="msg-envelope-date"></span>
            </div>
          </div>
          <ul class="msg-attachments-container">
          </ul>
          <div class="msg-body-container"><progress></progress></div>
          <div class="bottom-toolbar-spacer"></div>
        </div>
        <!-- Tells us about remote/not downloaded images, asks to show -->
        <div class="msg-reader-load-infobar collapsed">
        </div>
        <div class="msg-reader-action-toolbar bottom-toolbar">
          <button class="msg-delete-btn bottom-btn"></button>
          <button class="msg-star-btn bottom-btn"></button>
          <button class="msg-move-btn bottom-btn"></button>
          <button class="msg-forward-btn bottom-btn"></button>
        </div>
      </div>

      <div class="card-compose card">
        <section class="cmp-compose-header" role="region">
          <header>
            <a href="#" class="cmp-back-btn">
              <span class="icon icon-back">BacK</span>
            </a>
            <menu type="toolbar">
              <a href="#" class="cmp-send-btn header-right-btn">
                <span class="icon icon-send">SenD</span>
              </a>
            </menu>
            <h1 class="cmp-compose-header-label"
              data-l10n-id="compose-header">ComposE MessagE</h1>
          </header>
        </section>
        <div class="scrollregion-below-header">
          <div class="cmp-envelope-bar">
            <div class="cmp-envelope-line cmp-combo">
              <span class="cmp-to-label cmp-addr-label"
                     data-l10n-id="compose-to">tO:</span>
              <div class="cmp-to-container cmp-addr-container">
                <div class="cmp-bubble-container">
                    <input class="cmp-to-text cmp-addr-text" type="email" />
                </div>
                <div class="cmp-to-add cmp-contact-add"></div>
              </div>
            </div>
            <!-- XXX: spec calls for showing cc/bcc merged until selected,
                 but there is also the case where replying itself might need
                 to expand, so we are deferring that feature -->
            <div class="cmp-envelope-line cmp-combo">
              <span class="cmp-cc-label cmp-addr-label"
                     data-l10n-id="compose-cc">cC:</span>
              <div class="cmp-cc-container cmp-addr-container">
                <div class="cmp-bubble-container">
                  <input class="cmp-cc-text cmp-addr-text" type="email" />
                </div>
                <div class="cmp-cc-add cmp-contact-add"></div>
              </div>
            </div>
            <div class="cmp-envelope-line cmp-combo">
              <span class="cmp-bcc-label cmp-addr-label"
                     data-l10n-id="compose-bcc">BcC:</span>
              <div class="cmp-bcc-container cmp-addr-container">
                <div class="cmp-bubble-container">
                  <input class="cmp-bcc-text cmp-addr-text" type="email" />
                </div>
                <div class="cmp-bcc-add cmp-contact-add"></div>
              </div>
            </div>
            <div class="cmp-envelope-line cmp-combo">
              <span class="cmp-attachment-label cmp-addr-label"
                     data-l10n-id="compose-attachments[zero]">AttachmentS:</span>
              <div class="cmp-attachment-container cmp-addr-container">
                <div class="cmp-attachments-size">
                </div>
                <div class="cmp-attachment-add cmp-file-add"></div>
              </div>
            </div>
            <ul class="cmp-attachments-container">
            </ul>
            <div class="cmp-envelope-line cmp-subject">
              <span class="cmp-subject-label"
                     data-l10n-id="compose-subject">SubjecT:</span>
              <input class="cmp-subject-text" type="text" />
            </div>
          </div>
          <textarea class="cmp-body-text" rows="1"></textarea>
          <div class="cmp-body-html">
          </div>
        </div>
      </div>

      <!-- === Setup === -->
      <!-- From hyperlink, ask the user if they want to set up now or bail. -->
      <div class="card-setup-needed card">
      </div>
      <!-- Pick your service provider from popular options to save yourself
           some typing during account setup.  This may also result in
           advice on required additional steps (gmail). -->
      <div class="card-setup-pick-service card">
        <section class="sup-account-header" role="region">
          <header>
            <!-- only show this if there is at least one account -->
            <a href="#" class="sup-back-btn collapsed">
              <span class="icon icon-back"></span>
            </a>
            <h1 class="sup-account-header-label"
                data-l10n-id="setup-app-name-header">MaiL</h1>
          </header>
        </section>
        <h2 class="sup-pick-service-label sup-form-label"
            data-l10n-id="setup-pick-service">
          To SenD and ReceivE email, you will need to set up an account.
        </h2>
        <div class="sup-services-container">
        </div>
      </div>

      <!-- Per-account settings menu; largely read-only for now -->
      <section class="card-settings-account card skin-organic" role="region">
        <header class="tng-account-header">
          <a href="#" class="tng-back-btn back-btn header-left-btn">
            <span class="icon icon-back"></span>
          </a>
          <h1 class="tng-account-header-label header-label">AccounT NamE</h1>
        </header>
        <section class="scrollregion-below-header skin-organic" role="region">
          <li>
            <span data-l10n-id="settings-default-account" class="list-text">
              DefaulT AccounT</span>
            <em class="aside end">
              <label>
                <!-- When the input is focused, a resize event will be fired
                     and will trigger _showCard() in mail-common.js
                     the UI state will become wrong after _showCard() is called
                     so disable the input first to prevent the wrong state
                  -->
                <input disabled type="checkbox" checked="checked">
                <span></span>
              </label>
            </em>
          </li>
          <li>
            <span data-l10n-id="settings-account-type" class="list-text">
              AccounT TypE</span>
            <em class="aside end">
              <span class="tng-account-type list-value">AccounT TypE</span>
            </em>
          </li>
          <li class="synchronize-setting">
            <label data-l10n-id="settings-account-synchronize" class="list-text">SynchronizE</label>
            <span class="button icon icon-dialog">
              <select class="mail-select tng-account-synchronize">
                <option value="auto" data-l10n-id="settings-synchronize-auto">
                  AutomatiC</option>
                <option value="1d" data-l10n-id="settings-synchronize-one-day">
                  1 DaY</option>
                <option value="3d" data-l10n-id="settings-synchronize-three-days">
                  3 DayS</option>
                <option value="1w" data-l10n-id="settings-synchronize-one-week">
                  1 WeeK</option>
                <option value="2w" data-l10n-id="settings-synchronize-two-weeks">
                  2 WeekS</option>
                <option value="1m" data-l10n-id="settings-synchronize-one-month">
                  1 MontH</option>
                <option value="all" data-l10n-id="settings-synchronize-all">
                  AlL MessageS</option>
              </select>
            </span>
          </li>
          <li>
            <a href="#" data-l10n-id="settings-account-credentials"
              class="tng-account-credentials list-text">CredentialS</a>
            <em class="aside end"></em>
          </li>
          <div class="tng-account-server-container"></div>
          <li class="align-center">
            <button href="#" data-l10n-id="settings-account-delete"
              class="tng-account-delete danger">DeletE AccounT</button>
          </li>
        </section>
      </section>

      <!-- Developer debug page; for those in the know -->
      <section class="card-settings-debug card skin-organic" role="region">
        <header>
          <a href="#" class="tng-close-btn">
            <span class="icon icon-close"></span>
          </a>
          <h1 class="tng-main-header-label">Debug!</h1>
        </header>
        <div class="scrollregion-below-header">
          <ul>
            <li>
              <button class="tng-dbg-reset">Reset App</button>
            </li>
            <li>
              <button class="tng-dbg-logging"></button>
            </li>
            <li>
              <button class="tng-dbg-dangerous-logging"></button>
            </li>
            <li>
              <button class="tng-dbg-dump-storage">Dump log to storage</button>
            </li>
          </ul>
        </div>
      </section>
    </div>
    <!-- Widget nodes for folder cards; styles use the fld prefix -->
    <div id="templ-fld">
      <a class="fld-account-item">
        <span class="fld-account-name"></span>
        <span class="fld-account-problem icon collapsed">!</span>
        <span class="fld-account-unread"></span>
      </a>
      <a class="fld-folder-item">
        <span class="fld-folder-name"></span>
        <span class="fld-folder-unread"></span>
      </a>
    </div>
    <!-- Widget nodes for the message cards; styles use the msg prefix -->
    <div id="templ-msg">
      <a class="msg-header-item">
        <label class="negative">
          <input type="checkbox"><span></span>
        </label>
        <div class="msg-header-unread-section"></div>
        <div class="msg-header-details-section">
          <span class="msg-header-author-and-date">
            <span class="msg-header-author"></span>
            <span class="msg-header-date"></span>
          </span><span class="msg-header-subject"></span>
          <span class="msg-header-snippet"></span>
        </div><div class="msg-header-icons-section">
          <span class="msg-header-star"></span>
          <span class="msg-header-attachments"></span>
        </div><div class="msg-header-avatar-section">
        </div></a>

      <div class="msg-peep-bubble">
        <span class="msg-peep-content"></span>
      </div>

      <li class="msg-attachment-item">
        <span class="msg-attachment-icon"></span>
        <span class="msg-attachment-filename"></span>
        <span class="msg-attachment-filesize"></span>
        <button class="msg-attachment-download">
          <span class="icon icon-download"></span></button>
        <span class="msg-attachment-downloading">
          <progress class="small"></progress>
        </span>
        <button class="msg-attachment-view">
          <span data-l10n-id="message-attachment-view"></span>
        </button>
      </li>

      <form class="msg-contact-menu" role="dialog" data-type="action">
        <header></header>
        <menu>
          <button class="msg-contact-menu-new collapsed" data-l10n-id="message-contact-menu-new">
            Send new maiL
          </button>
          <button class="msg-contact-menu-reply collapsed" data-l10n-id="message-contact-menu-reply">
            ReplY
          </button>
          <button class="msg-contact-menu-view collapsed" data-l10n-id="message-contact-menu-view">
            View contacT
          </button>
          <button class="msg-contact-menu-create-contact collapsed" data-l10n-id="message-contact-menu-create">
            Save new contacT
          </button>
          <button class="msg-contact-menu-add-to-existing-contact collapsed" data-l10n-id="message-contact-menu-add-existing">
            Add to existing contacT
          </button>
          <button class="msg-contact-menu-cancel" data-l10n-id="message-multiedit-cancel">
            CanceL
          </button>
        </menu>
      </form>
      <form role="dialog" class="msg-delete-confirm" data-type="confirm">
        <section>
          <h1 data-l10n-id="confirm-dialog-title">ConfirmatioN</h1>
          <p><span data-l10n-id="message-edit-delete-confirm"></span></p>
        </section>
        <menu>
          <button id="msg-delete-cancel" data-l10n-id="message-multiedit-cancel">CanceL</button>
          <button id="msg-delete-ok" class="danger" data-l10n-id="message-edit-menu-delete">OK</button>
        </menu>
      </form>
      <form role="dialog" class="msg-browse-confirm" data-type="confirm">
        <section>
          <h1 data-l10n-id="confirm-dialog-title">Confirmation</h1>
          <p></p>
        </section>
        <menu>
          <button id="msg-browse-cancel" data-l10n-id="message-multiedit-cancel">CanceL</button>
          <button id="msg-browse-ok" class="recommend" data-l10n-id="dialog-button-ok">OK</button>
        </menu>
      </form>
    </div>
    <!-- Widget nodes for the compose cards; styles use the cmp prefix -->
    <div id="templ-cmp">
      <div class="cmp-peep-bubble">
        <span class="cmp-peep-name"></span>
        <span class="cmp-peep-address collapsed"></span>
      </div>
      <form class="cmp-contact-menu" role="dialog" data-type="action">
        <header></header>
        <menu>
          <button class="cmp-contact-menu-delete" data-l10n-id="message-edit-menu-delete">
            DeletE
          </button>
          <button class="cmp-contact-menu-cancel" data-l10n-id="message-multiedit-cancel">
            CanceL
          </button>
        </menu>
      </form>
      <form role="dialog" class="cmp-draft-menu" data-type="action">
        <menu>
          <button id="cmp-draft-save" data-l10n-id="compose-draft-save">SaVe DrAft</button>
          <button id="cmp-draft-discard" class="danger" data-l10n-id="compose-discard-confirm">DisCarD</button>
          <button id="cmp-draft-cancel" data-l10n-id="message-multiedit-cancel">CanCeL</button>
        </menu>
      </form>
      <form role="dialog" class="cmp-send-failed-confirm" data-type="confirm">
        <section>
          <h1 data-l10n-id="confirm-dialog-title">ConfirmatioN</h1>
          <p><span data-l10n-id="compose-send-message-failed"></span></p>
        </section>
        <menu>
          <button id="cmp-send-failed-cancel" data-l10n-id="message-multiedit-cancel">CanceL</button>
          <button id="cmp-send-failed-ok" class="recommend" data-l10n-id="dialog-button-ok">OK</button>
        </menu>
      </form>
      <li class="cmp-attachment-item">
        <span class="cmp-attachment-icon"></span>
        <span class="cmp-attachment-filename"></span>
        <span class="cmp-attachment-filesize"></span>
        <button class="cmp-attachment-remove">X</span>
      </li>
      <form role="dialog" data-type="confirm" class="cmp-sending-container">
        <section class="cmp-messages-sending">
          <p data-l10n-id="compose-sending-message">
            <progress></progress>
            Sending messagE
          </p>
        </section>
      </form>
    </div>
  </div>